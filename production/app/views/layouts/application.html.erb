<!DOCTYPE html>
<html>

   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"/>
      <title><%= get_head_title %></title>
      <meta name="description" content="<%= get_head_description %>">

      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
      <%= stylesheet_link_tag 'application', media: 'all', integrity: true %>
      <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.min.js"></script>
      <%= render 'layouts/favicon' %>
   </head>

   <body>

      <%= render 'layouts/flash' %>
      
      <div>
         <% if !@current_user.nil? %>
            <!-- Colocar 'hidden' na div abaixo pro menu ficar FECHADO -->
            <div class="custom-display-menu-open d-print-none" id="custom-display-menu-opened">
               <%= render 'layouts/menu/opened_menu_links', links: get_complete_menu(@current_user) %>
            </div>
            <!-- Colocar 'hidden' na div abaixo pro menu ficar ABERTO -->
            <div class="custom-display-menu-closed d-print-none" id="custom-display-menu-closed" hidden>
               <%= render 'layouts/menu/closed_menu_links', links: get_complete_menu(@current_user) %>
            </div>
         <% end %>

         <% if @current_user.nil? %>
            <div class="w-100">
               <%= yield %>
            </div>
         <% else %>
            <%= render 'users/modals/reset_password' %>
            <!-- Trocar o final da class da div abaixo entre: 'open' e 'closed' -->
            <div class="custom-display-screen-menu-open" id="div-with-page-content">
               <%= hidden_field_tag 'current_logged_user_id', @current_user.id %>
               <%= render 'layouts/navigation_logged_user' %>
               <div style="padding-bottom: 70px">
                  <%= yield %>
               </div>
               <footer class="d-print-none bg-light fixed-footer custom-display-screen-menu-open">
                  <div class="px-3 rounded mb-0 d-flex justify-content-around flex-wrap gap-3">
                     <a href="<%= show_text_path(text_to_show: SystemConfiguration::SOBRE_PRODUTO) %>" class="text-secondary text-decoration-none">
                        <%= SystemConfiguration.human_attribute_name(:about_product) %>
                     </a>
                     <a href="<%= show_text_path(text_to_show: SystemConfiguration::POLITICA_USO) %>" class="text-secondary text-decoration-none">
                        <%= SystemConfiguration.human_attribute_name(:use_policy) %>
                     </a>
                     <a href="<%= show_text_path(text_to_show: SystemConfiguration::POLITICA_PRIVACIDADE) %>" class="text-secondary text-decoration-none">
                        <%= SystemConfiguration.human_attribute_name(:privacy_policy) %>
                     </a>

                     <% if @current_user.admin? || @current_user.provider? %>
                        <a target="_blank" href="<%= @system_configuration.provider_contract.attached? ? rails_blob_path(@system_configuration.provider_contract, only_path: true) : "#" %>" class="text-secondary text-decoration-none">
                        <%= SystemConfiguration.human_attribute_name(:provider_contract) %>
                        </a>
                     <% end %>
                  </div>
               </footer>
            </div>
         <% end %>
         
      </div>

      <!-- Scripts -->
      <%= render "layouts/scripts/scripts" %>

   </body>

</html>

<%
# End of file application.html.erb
# Path: ./app/views/layouts/application.html.erb
%>
