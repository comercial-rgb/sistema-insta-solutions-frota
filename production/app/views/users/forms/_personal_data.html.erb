<% if !f.object.client? %>
    <%= render "users/forms/profile_image", f: f %>
<% end %>

<div class="row">
    <!-- Título -->
    <div class="col-12">
        <% 
            if f.object.client?
                page_title = User.human_attribute_name(:responsible_data)
            else
                page_title = User.human_attribute_name(:personal_data)
            end
        %>
        <h5 class="mt-4"><%= page_title.upcase %></h5>
    </div>
    <!-- Nome -->
    <div class="col-12 col-md-4 mb-3">
        <%= f.input :name, input_html: {class: 'insert_just_letter'} %>
    </div>
    <!-- Telefone -->
    <div class="col-12 col-md-2 mb-3">
        <%= f.input :phone, input_html: {class: 'complete-phone-ddd', type: "tel"} %>
    </div>
    <% if f.object.profile_id == Profile::PROVIDER_ID %>
        <div class="col-12 col-md-2 mb-3">
            <%= f.input :cellphone, input_html: {class: 'complete-phone-ddd', type: "tel"} %>
        </div>
    <% end %>

    <% if f.object.profile_id == Profile::MANAGER_ID || f.object.profile_id == Profile::ADDITIONAL_ID || f.object.profile_id == Profile::CLIENT_ID %>
        <!-- CPF -->
        <% 
            if f.object.client? || f.object.manager?
                cpf_label = User.human_attribute_name(:cpf)
            else
                cpf_label = User.human_attribute_name(:cpf_registration)
            end
        %>
        <div class="col-12 col-md-3 mb-3">
            <%= f.input :cpf, input_html: {type: "tel"}, label: cpf_label %>
        </div>
        <% if f.object.profile_id == Profile::CLIENT_ID %>
            <div class="col-12 col-md-2 mb-3">
                <%= f.input :rg %>
            </div>
            <div class="col-12 col-md-3 mb-3">
                <%= f.input :require_vehicle_photos, as: :boolean, label: 'Exigir fotos do veículo (frontal, lateral, hodômetro) nas OS' %>
            </div>
        <% end %>
        <% if f.object.profile_id == Profile::MANAGER_ID %>
            <div class="col-12 col-md-2 mb-3">
                <%= f.input :registration %>
            </div>
        <% end %>
        <% if f.object.profile_id == Profile::ADDITIONAL_ID %>
            <div class="col-12 col-md-3 mb-3">
                <%= f.input :department %>
            </div>
        <% end %>
    <% end %>
</div>

<% if [Profile::MANAGER_ID, Profile::ADDITIONAL_ID].include?(f.object.profile_id) %>
    <div class="row">
        <div class="col-12 col-md-3 mb-3">
            <%= f.association :state, collection: State.all, as: :select, include_blank: t("model.select_option") %>
        </div>
        <div class="col-12 col-md-3 mb-3">
            <%= f.association :city, collection: City.all, as: :select, include_blank: t("model.select_option") %>
        </div>
    </div>
<% end %>

<% if policy(f.object).block? %>
    <div class="row">
        <div class="col-12 col-md-4 mb-3">
            <%= f.input :email, label: (f.object.profile_id != Profile::CLIENT_ID ? User.human_attribute_name(:email) : User.human_attribute_name(:only_email_text)), input_html: {class: 'text-lowercase no-space', type: "email"} %>
        </div>
        <% if !f.object.client? %>
            <div class="col-12 col-md-2 mb-3">
                <%= f.input :is_blocked, label: (f.object.profile_id != Profile::CLIENT_ID ? User.human_attribute_name(:status) : User.human_attribute_name(:only_status_text)), as: :select, collection: [[User.human_attribute_name(:active), false],[User.human_attribute_name(:inactive), true]], include_blank: false %>
            </div>
        <% end %>
    </div>
<% end %>

<% if f.object.manager? && @current_user.admin? %>
    <div class="row">
        <div class="col-12 mb-2">
            <h5 class="mt-4"><%= CostCenter.model_name.human(count: 2).upcase %></h5>
        </div>
    </div>
    <% User.client.all.each do |client| %>
        <div <%= 'hidden' if f.object.client_id != client.id %> id="cost-centers-client-<%= client.id.to_s %>" class="cost-centers-client col-12 col-md-4">
            <%= 
                render "users/forms/filter_registers_cost_centers",
                label_text: '',
                register_name: "cost-center",
                form_model: :user,
                form_attribute: :associated_cost_center_ids,
                collection: CostCenter.getting_data_by_user(@current_user).where(client_id: client.id),
                value_register: :id,
                label_register: :name,
                placeholder: t("model.find_filter")
            %>
        </div>
    <% end %>
<% end %>

<%
# End of file _personal_data.html.erb
# Path: ./app/views/users/forms/_personal_data.html.erb
%>
